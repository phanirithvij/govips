// Code generated by vipsgen. DO NOT EDIT.
#include "gen_resample.h"

int gen_vips_affine(VipsImage * input, double * matrix, int matrix_n, VipsImage ** out_out, GenAffineOpts *opts) {
    VipsOperation *op = vips_operation_new("affine");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    {
        VipsArrayDouble *arr = vips_array_double_new(matrix, matrix_n);
        int ret = vips_object_set(VIPS_OBJECT(op), "matrix", arr, NULL);
        vips_area_unref(VIPS_AREA(arr));
        if (ret) goto error;
    }

    if (opts) {
        if (opts->has_interpolate) {
            vips_object_set(VIPS_OBJECT(op), "interpolate", opts->interpolate, NULL);
        }
        if (opts->has_oarea) {
            {
                VipsArrayInt *arr = vips_array_int_new(opts->oarea, opts->oarea_n);
                vips_object_set(VIPS_OBJECT(op), "oarea", arr, NULL);
                vips_area_unref(VIPS_AREA(arr));
            }
        }
        if (opts->has_odx) {
            vips_object_set(VIPS_OBJECT(op), "odx", opts->odx, NULL);
        }
        if (opts->has_ody) {
            vips_object_set(VIPS_OBJECT(op), "ody", opts->ody, NULL);
        }
        if (opts->has_idx) {
            vips_object_set(VIPS_OBJECT(op), "idx", opts->idx, NULL);
        }
        if (opts->has_idy) {
            vips_object_set(VIPS_OBJECT(op), "idy", opts->idy, NULL);
        }
        if (opts->has_background) {
            {
                VipsArrayDouble *arr = vips_array_double_new(opts->background, opts->background_n);
                vips_object_set(VIPS_OBJECT(op), "background", arr, NULL);
                vips_area_unref(VIPS_AREA(arr));
            }
        }
        if (opts->has_premultiplied) {
            vips_object_set(VIPS_OBJECT(op), "premultiplied", (gboolean)opts->premultiplied, NULL);
        }
        if (opts->has_extend) {
            vips_object_set(VIPS_OBJECT(op), "extend", (int)opts->extend, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_globalbalance(VipsImage * input, VipsImage ** out_out, GenGlobalbalanceOpts *opts) {
    VipsOperation *op = vips_operation_new("globalbalance");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;

    if (opts) {
        if (opts->has_gamma) {
            vips_object_set(VIPS_OBJECT(op), "gamma", opts->gamma, NULL);
        }
        if (opts->has_intOutput) {
            vips_object_set(VIPS_OBJECT(op), "int-output", (gboolean)opts->intOutput, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_mapim(VipsImage * input, VipsImage * index, VipsImage ** out_out, GenMapimOpts *opts) {
    VipsOperation *op = vips_operation_new("mapim");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "index", index, NULL)) goto error;

    if (opts) {
        if (opts->has_interpolate) {
            vips_object_set(VIPS_OBJECT(op), "interpolate", opts->interpolate, NULL);
        }
        if (opts->has_background) {
            {
                VipsArrayDouble *arr = vips_array_double_new(opts->background, opts->background_n);
                vips_object_set(VIPS_OBJECT(op), "background", arr, NULL);
                vips_area_unref(VIPS_AREA(arr));
            }
        }
        if (opts->has_premultiplied) {
            vips_object_set(VIPS_OBJECT(op), "premultiplied", (gboolean)opts->premultiplied, NULL);
        }
        if (opts->has_extend) {
            vips_object_set(VIPS_OBJECT(op), "extend", (int)opts->extend, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_match(VipsImage * ref, VipsImage * sec, int xr1, int yr1, int xs1, int ys1, int xr2, int yr2, int xs2, int ys2, VipsImage ** out_out, GenMatchOpts *opts) {
    VipsOperation *op = vips_operation_new("match");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "ref", ref, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "sec", sec, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xr1", xr1, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "yr1", yr1, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xs1", xs1, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "ys1", ys1, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xr2", xr2, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "yr2", yr2, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xs2", xs2, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "ys2", ys2, NULL)) goto error;

    if (opts) {
        if (opts->has_hwindow) {
            vips_object_set(VIPS_OBJECT(op), "hwindow", opts->hwindow, NULL);
        }
        if (opts->has_harea) {
            vips_object_set(VIPS_OBJECT(op), "harea", opts->harea, NULL);
        }
        if (opts->has_search) {
            vips_object_set(VIPS_OBJECT(op), "search", (gboolean)opts->search, NULL);
        }
        if (opts->has_interpolate) {
            vips_object_set(VIPS_OBJECT(op), "interpolate", opts->interpolate, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_merge(VipsImage * ref, VipsImage * sec, VipsDirection direction, int dx, int dy, VipsImage ** out_out, GenMergeOpts *opts) {
    VipsOperation *op = vips_operation_new("merge");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "ref", ref, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "sec", sec, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "direction", (int)direction, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "dx", dx, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "dy", dy, NULL)) goto error;

    if (opts) {
        if (opts->has_mblend) {
            vips_object_set(VIPS_OBJECT(op), "mblend", opts->mblend, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_mosaic(VipsImage * ref, VipsImage * sec, VipsDirection direction, int xref, int yref, int xsec, int ysec, VipsImage ** out_out, int * out_dx0, int * out_dy0, double * out_scale1, double * out_angle1, double * out_dy1, double * out_dx1, GenMosaicOpts *opts) {
    VipsOperation *op = vips_operation_new("mosaic");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "ref", ref, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "sec", sec, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "direction", (int)direction, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xref", xref, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "yref", yref, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xsec", xsec, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "ysec", ysec, NULL)) goto error;

    if (opts) {
        if (opts->has_hwindow) {
            vips_object_set(VIPS_OBJECT(op), "hwindow", opts->hwindow, NULL);
        }
        if (opts->has_harea) {
            vips_object_set(VIPS_OBJECT(op), "harea", opts->harea, NULL);
        }
        if (opts->has_mblend) {
            vips_object_set(VIPS_OBJECT(op), "mblend", opts->mblend, NULL);
        }
        if (opts->has_bandno) {
            vips_object_set(VIPS_OBJECT(op), "bandno", opts->bandno, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);
    g_object_get(VIPS_OBJECT(op), "dx0", out_dx0, NULL);
    g_object_get(VIPS_OBJECT(op), "dy0", out_dy0, NULL);
    g_object_get(VIPS_OBJECT(op), "scale1", out_scale1, NULL);
    g_object_get(VIPS_OBJECT(op), "angle1", out_angle1, NULL);
    g_object_get(VIPS_OBJECT(op), "dy1", out_dy1, NULL);
    g_object_get(VIPS_OBJECT(op), "dx1", out_dx1, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_mosaic1(VipsImage * ref, VipsImage * sec, VipsDirection direction, int xr1, int yr1, int xs1, int ys1, int xr2, int yr2, int xs2, int ys2, VipsImage ** out_out, GenMosaic1Opts *opts) {
    VipsOperation *op = vips_operation_new("mosaic1");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "ref", ref, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "sec", sec, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "direction", (int)direction, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xr1", xr1, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "yr1", yr1, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xs1", xs1, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "ys1", ys1, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xr2", xr2, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "yr2", yr2, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "xs2", xs2, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "ys2", ys2, NULL)) goto error;

    if (opts) {
        if (opts->has_hwindow) {
            vips_object_set(VIPS_OBJECT(op), "hwindow", opts->hwindow, NULL);
        }
        if (opts->has_harea) {
            vips_object_set(VIPS_OBJECT(op), "harea", opts->harea, NULL);
        }
        if (opts->has_search) {
            vips_object_set(VIPS_OBJECT(op), "search", (gboolean)opts->search, NULL);
        }
        if (opts->has_interpolate) {
            vips_object_set(VIPS_OBJECT(op), "interpolate", opts->interpolate, NULL);
        }
        if (opts->has_mblend) {
            vips_object_set(VIPS_OBJECT(op), "mblend", opts->mblend, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_quadratic(VipsImage * input, VipsImage * coeff, VipsImage ** out_out, GenQuadraticOpts *opts) {
    VipsOperation *op = vips_operation_new("quadratic");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "coeff", coeff, NULL)) goto error;

    if (opts) {
        if (opts->has_interpolate) {
            vips_object_set(VIPS_OBJECT(op), "interpolate", opts->interpolate, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_reduce(VipsImage * input, double hshrink, double vshrink, VipsImage ** out_out, GenReduceOpts *opts) {
    VipsOperation *op = vips_operation_new("reduce");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "hshrink", hshrink, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "vshrink", vshrink, NULL)) goto error;

    if (opts) {
        if (opts->has_kernel) {
            vips_object_set(VIPS_OBJECT(op), "kernel", (int)opts->kernel, NULL);
        }
        if (opts->has_gap) {
            vips_object_set(VIPS_OBJECT(op), "gap", opts->gap, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_reduceh(VipsImage * input, double hshrink, VipsImage ** out_out, GenReducehOpts *opts) {
    VipsOperation *op = vips_operation_new("reduceh");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "hshrink", hshrink, NULL)) goto error;

    if (opts) {
        if (opts->has_kernel) {
            vips_object_set(VIPS_OBJECT(op), "kernel", (int)opts->kernel, NULL);
        }
        if (opts->has_gap) {
            vips_object_set(VIPS_OBJECT(op), "gap", opts->gap, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_reducev(VipsImage * input, double vshrink, VipsImage ** out_out, GenReducevOpts *opts) {
    VipsOperation *op = vips_operation_new("reducev");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "vshrink", vshrink, NULL)) goto error;

    if (opts) {
        if (opts->has_kernel) {
            vips_object_set(VIPS_OBJECT(op), "kernel", (int)opts->kernel, NULL);
        }
        if (opts->has_gap) {
            vips_object_set(VIPS_OBJECT(op), "gap", opts->gap, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_remosaic(VipsImage * input, const char * oldStr, const char * newStr, VipsImage ** out_out) {
    VipsOperation *op = vips_operation_new("remosaic");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "old-str", oldStr, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "new-str", newStr, NULL)) goto error;

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_rotate(VipsImage * input, double angle, VipsImage ** out_out, GenRotateOpts *opts) {
    VipsOperation *op = vips_operation_new("rotate");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "angle", angle, NULL)) goto error;

    if (opts) {
        if (opts->has_interpolate) {
            vips_object_set(VIPS_OBJECT(op), "interpolate", opts->interpolate, NULL);
        }
        if (opts->has_background) {
            {
                VipsArrayDouble *arr = vips_array_double_new(opts->background, opts->background_n);
                vips_object_set(VIPS_OBJECT(op), "background", arr, NULL);
                vips_area_unref(VIPS_AREA(arr));
            }
        }
        if (opts->has_odx) {
            vips_object_set(VIPS_OBJECT(op), "odx", opts->odx, NULL);
        }
        if (opts->has_ody) {
            vips_object_set(VIPS_OBJECT(op), "ody", opts->ody, NULL);
        }
        if (opts->has_idx) {
            vips_object_set(VIPS_OBJECT(op), "idx", opts->idx, NULL);
        }
        if (opts->has_idy) {
            vips_object_set(VIPS_OBJECT(op), "idy", opts->idy, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_shrink(VipsImage * input, double hshrink, double vshrink, VipsImage ** out_out, GenShrinkOpts *opts) {
    VipsOperation *op = vips_operation_new("shrink");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "hshrink", hshrink, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "vshrink", vshrink, NULL)) goto error;

    if (opts) {
        if (opts->has_ceil) {
            vips_object_set(VIPS_OBJECT(op), "ceil", (gboolean)opts->ceil, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_shrinkh(VipsImage * input, int hshrink, VipsImage ** out_out, GenShrinkhOpts *opts) {
    VipsOperation *op = vips_operation_new("shrinkh");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "hshrink", hshrink, NULL)) goto error;

    if (opts) {
        if (opts->has_ceil) {
            vips_object_set(VIPS_OBJECT(op), "ceil", (gboolean)opts->ceil, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_shrinkv(VipsImage * input, int vshrink, VipsImage ** out_out, GenShrinkvOpts *opts) {
    VipsOperation *op = vips_operation_new("shrinkv");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;
    if (vips_object_set(VIPS_OBJECT(op), "vshrink", vshrink, NULL)) goto error;

    if (opts) {
        if (opts->has_ceil) {
            vips_object_set(VIPS_OBJECT(op), "ceil", (gboolean)opts->ceil, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

int gen_vips_similarity(VipsImage * input, VipsImage ** out_out, GenSimilarityOpts *opts) {
    VipsOperation *op = vips_operation_new("similarity");
    if (!op) return -1;

    if (vips_object_set(VIPS_OBJECT(op), "in", input, NULL)) goto error;

    if (opts) {
        if (opts->has_scale) {
            vips_object_set(VIPS_OBJECT(op), "scale", opts->scale, NULL);
        }
        if (opts->has_angle) {
            vips_object_set(VIPS_OBJECT(op), "angle", opts->angle, NULL);
        }
        if (opts->has_interpolate) {
            vips_object_set(VIPS_OBJECT(op), "interpolate", opts->interpolate, NULL);
        }
        if (opts->has_background) {
            {
                VipsArrayDouble *arr = vips_array_double_new(opts->background, opts->background_n);
                vips_object_set(VIPS_OBJECT(op), "background", arr, NULL);
                vips_area_unref(VIPS_AREA(arr));
            }
        }
        if (opts->has_odx) {
            vips_object_set(VIPS_OBJECT(op), "odx", opts->odx, NULL);
        }
        if (opts->has_ody) {
            vips_object_set(VIPS_OBJECT(op), "ody", opts->ody, NULL);
        }
        if (opts->has_idx) {
            vips_object_set(VIPS_OBJECT(op), "idx", opts->idx, NULL);
        }
        if (opts->has_idy) {
            vips_object_set(VIPS_OBJECT(op), "idy", opts->idy, NULL);
        }
    }

    if (vips_cache_operation_buildp(&op)) goto error;

    g_object_get(VIPS_OBJECT(op), "out", out_out, NULL);

    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return 0;

error:
    vips_object_unref_outputs(VIPS_OBJECT(op));
    g_object_unref(op);
    return -1;
}

