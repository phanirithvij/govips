// Code generated by vipsgen. DO NOT EDIT.
package vips

// #include "gen_histogram.h"
import "C"

import "unsafe"

// Ensure imports are used.
var _ = unsafe.Pointer(nil)

// vipsGenHistCum calls the vips hist_cum operation.
// form cumulative histogram
func vipsGenHistCum(input *C.VipsImage) (*C.VipsImage, error) {
	incOpCounter("hist_cum")

	var out_out *C.VipsImage

	ret := C.gen_vips_hist_cum(input, &out_out)
	if ret != 0 {
		return nil, handleImageError(out_out)
	}

	return out_out, nil
}

// vipsGenHistEntropy calls the vips hist_entropy operation.
// estimate image entropy
func vipsGenHistEntropy(input *C.VipsImage) (float64, error) {
	incOpCounter("hist_entropy")

	var out_out C.double

	ret := C.gen_vips_hist_entropy(input, &out_out)
	if ret != 0 {
		return 0, handleVipsError()
	}

	return float64(out_out), nil
}

// HistEqualOptions are optional parameters for hist_equal.
type HistEqualOptions struct {
	Band *int
}

// vipsGenHistEqual calls the vips hist_equal operation.
// histogram equalisation
func vipsGenHistEqual(input *C.VipsImage, opts *HistEqualOptions) (*C.VipsImage, error) {
	incOpCounter("hist_equal")

	var out_out *C.VipsImage

	var cOpts C.GenHistEqualOpts
	if opts != nil {
		if opts.Band != nil {
			cOpts.has_band = 1
			cOpts.band = C.int(*opts.Band)
		}
	}

	ret := C.gen_vips_hist_equal(input, &out_out, &cOpts)
	if ret != 0 {
		return nil, handleImageError(out_out)
	}

	return out_out, nil
}

// vipsGenHistIsmonotonic calls the vips hist_ismonotonic operation.
// test for monotonicity
func vipsGenHistIsmonotonic(input *C.VipsImage) (bool, error) {
	incOpCounter("hist_ismonotonic")

	var out_monotonic C.int

	ret := C.gen_vips_hist_ismonotonic(input, &out_monotonic)
	if ret != 0 {
		return false, handleVipsError()
	}

	return out_monotonic != 0, nil
}

// HistLocalOptions are optional parameters for hist_local.
type HistLocalOptions struct {
	MaxSlope *int
}

// vipsGenHistLocal calls the vips hist_local operation.
// local histogram equalisation
func vipsGenHistLocal(input *C.VipsImage, width int, height int, opts *HistLocalOptions) (*C.VipsImage, error) {
	incOpCounter("hist_local")

	var out_out *C.VipsImage

	var cOpts C.GenHistLocalOpts
	if opts != nil {
		if opts.MaxSlope != nil {
			cOpts.has_maxSlope = 1
			cOpts.maxSlope = C.int(*opts.MaxSlope)
		}
	}

	ret := C.gen_vips_hist_local(input, C.int(width), C.int(height), &out_out, &cOpts)
	if ret != 0 {
		return nil, handleImageError(out_out)
	}

	return out_out, nil
}

// vipsGenHistMatch calls the vips hist_match operation.
// match two histograms
func vipsGenHistMatch(input *C.VipsImage, ref *C.VipsImage) (*C.VipsImage, error) {
	incOpCounter("hist_match")

	var out_out *C.VipsImage

	ret := C.gen_vips_hist_match(input, ref, &out_out)
	if ret != 0 {
		return nil, handleImageError(out_out)
	}

	return out_out, nil
}

// vipsGenHistNorm calls the vips hist_norm operation.
// normalise histogram
func vipsGenHistNorm(input *C.VipsImage) (*C.VipsImage, error) {
	incOpCounter("hist_norm")

	var out_out *C.VipsImage

	ret := C.gen_vips_hist_norm(input, &out_out)
	if ret != 0 {
		return nil, handleImageError(out_out)
	}

	return out_out, nil
}

// vipsGenHistPlot calls the vips hist_plot operation.
// plot histogram
func vipsGenHistPlot(input *C.VipsImage) (*C.VipsImage, error) {
	incOpCounter("hist_plot")

	var out_out *C.VipsImage

	ret := C.gen_vips_hist_plot(input, &out_out)
	if ret != 0 {
		return nil, handleImageError(out_out)
	}

	return out_out, nil
}

// MaplutOptions are optional parameters for maplut.
type MaplutOptions struct {
	Band *int
}

// vipsGenMaplut calls the vips maplut operation.
// map an image though a lut
func vipsGenMaplut(input *C.VipsImage, lut *C.VipsImage, opts *MaplutOptions) (*C.VipsImage, error) {
	incOpCounter("maplut")

	var out_out *C.VipsImage

	var cOpts C.GenMaplutOpts
	if opts != nil {
		if opts.Band != nil {
			cOpts.has_band = 1
			cOpts.band = C.int(*opts.Band)
		}
	}

	ret := C.gen_vips_maplut(input, lut, &out_out, &cOpts)
	if ret != 0 {
		return nil, handleImageError(out_out)
	}

	return out_out, nil
}

// vipsGenPercent calls the vips percent operation.
// find threshold for percent of pixels
func vipsGenPercent(input *C.VipsImage, percent float64) (int, error) {
	incOpCounter("percent")

	var out_threshold C.int

	ret := C.gen_vips_percent(input, C.double(percent), &out_threshold)
	if ret != 0 {
		return 0, handleVipsError()
	}

	return int(out_threshold), nil
}

// StdifOptions are optional parameters for stdif.
type StdifOptions struct {
	S0 *float64
	B *float64
	M0 *float64
	A *float64
}

// vipsGenStdif calls the vips stdif operation.
// statistical difference
func vipsGenStdif(input *C.VipsImage, width int, height int, opts *StdifOptions) (*C.VipsImage, error) {
	incOpCounter("stdif")

	var out_out *C.VipsImage

	var cOpts C.GenStdifOpts
	if opts != nil {
		if opts.S0 != nil {
			cOpts.has_s0 = 1
			cOpts.s0 = C.double(*opts.S0)
		}
		if opts.B != nil {
			cOpts.has_b = 1
			cOpts.b = C.double(*opts.B)
		}
		if opts.M0 != nil {
			cOpts.has_m0 = 1
			cOpts.m0 = C.double(*opts.M0)
		}
		if opts.A != nil {
			cOpts.has_a = 1
			cOpts.a = C.double(*opts.A)
		}
	}

	ret := C.gen_vips_stdif(input, C.int(width), C.int(height), &out_out, &cOpts)
	if ret != 0 {
		return nil, handleImageError(out_out)
	}

	return out_out, nil
}

